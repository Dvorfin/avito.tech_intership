# Приложение-интерфейс для работы с Redis'ом с проксированием трафика.

Использованные технологии:
- redis (в качестве хранилища данных)
- golang (для создания приложения взаимдействия)
- nginx (для проксирования трафика к приложению)
- Docker (для контейнеризации компонентов и их запуска)

# Настройки
При решении задания возникли сомнения в формулировке "приложение-интерфейс". Оно должно представлять из себя просто возможность отправлять, например, curl запросы на эндпоинты или должно иметь некоторый ui? 
По этой причине реализовано две версии: с поддержкой веб-интерфейса и без. 
По дефолту приложение запсукается с веб-интерфейсом. Для того чтобы запустить его без - в файле конфигурации envfile.env нужно удалить или изменить значение `WITH_UI`.
Также в файле конфигурации можно задать пароль для redis'a в параметре `REDIS_PASSWORD`. Также необходимо в enpoints/endpoints.go изменить значение переменной `pass`. (доработать в конфиг)

# Запуск с веб-интерфейсом
```sh
docker compose up
```
После успешного запуска перейти по адресу http://tech-avito-test/, откроется окно:
![image](https://github.com/Dvorfin/avito.tech_intership/assets/70969469/a3411efb-d3ba-43a7-bfba-a1caad3e989a)

Веб-интерфейс реализует:
1) Получение значения по ключу.
в случае наличия ключа в БД будет получен респонс:
```json
{
  "Key": "введенный ключ"
  "Value": "значение ключа"
}
```
в случае отсутствия ключа:
```json
{
  "Msg": "There is no such key."
}
```

2) Установку ключа.
в случае отсутствия ключа в БД будет получен респонс:
```json
{
  "Msg": "Key setted."
}
```

в случае попытки установить/обновить ключ пустым значением будет получен респонс:
```json
{
  "Msg": "Key updated. Notice, that value was empty!"
}
```

3) Удаление ключа.
в случае наличия ключа в БД будет получен респонс:
```json
{
  "Msg": "Key sucessfully deleted!"
}
```

в случае отсутствия ключа:
```json
{
  "Msg": "There is no such key."
}
```

# Запуск с без веб-интерфейса
```sh
docker compose up
```
Для взаимодействия воспользуемся curl.
1) Для получения значения по ключу:
```curl
curl -i tech-avito-test:80/get_key?key=<указать значение ключа>
```

2) Для установки/обновления ключа:
```curl
curl -X POST tech-avito-test:80/set_key -d '{"key": "<ключ>", "value": "<значение>"}'
```
Важно! 
`<ключ>` заменить на ключ без `<` `>`, например: `<ключ>` -> myKey
Ключ и значение должны быть строкой! В случае попытки отправить другой тип ключа сообщение:
```json
{
  "Msg": "Invalid key type! Must be string."
}
```
В случае некорректного значения:
```json
{
  "Msg": "Invalid value type! Must be string."
}
```

3) Для удаления ключа:
```curl
curl -i -X DELETE tech-avito-test:80/del_key -d '{"<ключ>": "<значение>"}'
```

Все респонсы аналогичны описанным в блоке "Запуск с веб-интерфейсом".
